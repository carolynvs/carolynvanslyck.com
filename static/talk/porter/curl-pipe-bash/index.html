<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>A safer curl | bash for the cloud</title>

		<meta name="description" content="A replacement one-liner for your cloud native deployments with Porter">
		<meta name="author" content="Carolyn Van Slyck">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="icon" type="image/png" href="/favicon.ico"/>
		<link rel="stylesheet" href="../../revealjs/css/reveal.css">
		<link rel="stylesheet" href="../../revealjs/css/theme/black.css" id="theme">

		<!-- Twitter Card -->
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:site" content="@carolynvs">
		<meta name="twitter:title" content="A safer curl | bash for the cloud">
		<meta name="twitter:description" content="A replacement one-liner for your cloud native deployments with Porter">
		<meta name="twitter:image" content="TODO">
		<meta name="twitter:image:alt" content="TODO">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="../../revealjs/lib/css/zenburn.css">

		<link rel="stylesheet" href="../../revealjs/css/custom.css">
		<link rel="stylesheet" href="custom.css">

		<!-- Open links outside of presentation -->
		<base target="_blank">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../../revealjs/css/print/pdf.css' : '../../revealjs/css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h2 class="blue" style="margin-bottom: 0;">
						A safer curl | bash for the cloud
					</h2>

					<img src="tabbycats2.png" width="400px" alt="Cartoon cat, gray wearing a blue beanie, hipster glasses and has a white coffee mug. Their name is Snuggly Squirrel."/>

					<p>
						Carolyn Van Slyck<br/>
						<hr style="width: 20em"/>
						Principal Software Engineer at Microsoft<br/>
						Porter Maintainer<br/>
					</p>

					<aside class="notes">
					</aside>
				</section>

				<section id="problem-statement">
					<h2>curl https://example.com/install-it-quick.sh | bash</h2>

					<aside class="notes">
						First let's talk about what "curl pipe bash" is. That's when you copy/paste 
						a command that looks like the one here. We all use scripts like this because
						they quickly install software that you aren't familiar with.
						curl downloads the script, and then the script contents are "piped" to bash
						where they are immediately executed.
					</aside>
				</section>

				<section id="yolo">
					<h2>Why we secretly like curl | bash</h2>

					<ul>
						<li class="fragment">Instant gratification</li>
						<li class="fragment">No experience required</li>
						<li class="fragment">High likelihood of success</li>
					</ul>
					<aside class="notes">
						Honestly I really like installation scripts because:
						* It is a one-liner to install.
						* Requires little to no knowledge of the installation logic or tooling.
						* We believe that the project maintainers can automate the installation better than us on the first try.

						Let's review though why using curl pipe bash is a security risk.
					</aside>
				</section>

				<section id="oops">
					<h2>Would you give an internet rando root on your machine?</h2>

					<aside class="notes">
						Let's say someone on the internet offered to help install something for you real quick.
						All you need to do is hand over your laptop for 5 seconds. I don't know about you, 
						but I don't hand over my laptop to my husband and I _trust him_. Mostly. ÔøΩâ

						When we think about handing over your laptop to a stranger, its easy to see why its risky.
						They would have access to everything on there: your documents, pictures, environment variables
						containing security tokens and passwords, you're logged into a bunch of sites, maybe even your
						work VPN. It's clear that stranger could do anything with your laptop that you yourself could do.

						That doesn't change when you switch from a physical laptop to a quick copy/paste of an installation 
						script. Oops.
					</aside>
				</section>

				<section id="pipe-detection">
					<h2>The code you read may not be the code you get</h2>

					<a href="https://www.idontplaydarts.com/2016/04/detecting-curl-pipe-bash-server-side/">idontplaydarts.com/2016/04/detecting-curl-pipe-bash-server-side</a>
					<aside class="notes">
						Okay, so what if you read the script first and then run it? Just open the
						script in your browser, look it over and go "yeah this looks like how I expected"
						and then copy/paste that one liner.

						Here's a fun fact: a web server can detect that you are piping that web request
						to bash. I'll provide a link later with the details but a malicious server could
						detect that you are piping to bash and then decide to give you a different file.
						Not that file that you just read in your browser, but whatever it wants. And
						then you are right back to where you started. Letting randos run amok on your computer.
					</aside>
				</section>

				<section id="checksums">
					<h2>In checksums we trust, right?</h2>

					<ol>
						<li class="fragment">First download the file</li>
						<li class="fragment">Then compare the checksum</li>
						<li class="fragment">Ok now you can read it</li>
						<li class="fragment">Finally run it</li>
					</ol>
					<aside class="notes">
						* not copy paste friendly
						* reading bash doesn't always yield comprehension
						* still running as you
					</aside>
				</section>

				<section id="cloud-native-deployments">
					<h2>But what if I really want to?</h2>

					<ul>
						<li>Reading is hard ü§¶‚Äç‚ôÄÔ∏è</li>
						<li>Cloud Native deployments can be pretty complex</li>
						<li>I want it to be easier for people to try out my project</li>
					</ul>
					<aside class="notes">
You know who could really benefit from a one-liner? Cloud Native Deployments
    * Most of us don't want to read a series of docs, and install extra tools to try something out.
    * Next we have to figure out how to script coordinating these tools. For example, creating a database, and then passing the connection string as a helm chart value.
    * Lots of people stop there and decide it is more work than they are willing to invest. Especially initially when they don't know if they want to use the software.
					</aside>
				</section>

				<section id="safety-first">
					<h2>Let's make those one-liners safe!</h2>

					<ul>
						<li class="fragment">Isolate the installer</li>
						<li class="fragment">Automatic digest/signature checking</li>
						<li class="fragment">Insight into what the installer will do</li>
					</ul>

					<aside class="notes">
						* Flip the reflexive "You can't do that, it's not safe" to "How can we make it safe?"
						* Isolate the installer, only giving access to what it needs
						* Something that does the boring stuff like signature/digest checking for us
						* Provide insight into what's in the installer
					</aside>
				</section>

				<section id="porter">
					<h2 style="margin-bottom: 0;">Porter</h2>
					<img src="/images/porter.png" style="width: 150px;"/>

					<p>Package your application artifact, client tools, configuration and deployment logic together as a versioned bundle that you can distribute, and then install with a single command</p>
					<aside class="notes">
	* Porter is a CNCF Sandbox project
	* It's used to create cloud native application bundles, i.e. cloud installers
	* Doesn't replace any of your tools, it adds a layer of packaging and security to what you use today
	* Works with any tooling or stack. You can work with VMs, containers, clusters, bare metal, IOT, serverless, whatever you can script.
					</aside>
				</section>

				<section id="tabbycats">
					<h2>Let's install TabbyCats Tracker!</h2>

					<p>
					<img src="tabbycats2.png" width="400px" alt="Cartoon cat, gray wearing a blue beanie, hipster glasses and has a white coffee mug. Their name is Snuggly Squirrel."/>
					</p>

					<a href="https://tabbycats.club">tabbycats.club</a>

					<aside class="notes">
						Open a new tab and show tabbycats

						Demo the final app we want to install
					</aside>
				</section>

				<section id="the-app">

					<ul>
						<li>Runs on Kubernetes</li>
						<li>Installed with Helm</li>
						<li>Connected to a cloud database</li>
						<li>Fronted by CloudFlare</li>
					</ul>

					<aside class="notes">
						convert to logos

    * Explain that a bundle can work with any tool. 
	* It could have just as easily been serverless functions, virtual machines, etc.
					</aside>
				</section>

				<section id="install-it">
					<h2></h2>

					show porter explain output for our bundle

					call out the credentials it needs
					run credentials generate and point to a keyvault instance
					run install
					
					<aside class="notes">
						explain that now we are a user and we want to install it
					</aside>
				</section>

				<section id="use-cases">
					<h2>Who would use this?</h2>

					<ul>
						<li class="fragment">Quickstarts - Do I want to use this?</li>
						<li class="fragment">Customer Installations - Do they want to manage this?</li>
						<li class="fragment">Your Own Deployments - Hey I didn't write this!</li>
						<li class="fragment">Side Projects - I forgot how to deploy this...</li>
					</ul>
					<aside class="notes">
						make 4 boxes with each item


* Winning over potential adopters
* Customers have to install and manage your software, what can you provide beyond docs to make them more successful?
* At your own company, the people who know how to install and manage the software aren't the ones tasked with doing so.
					</aside>
				</section>
				
				<section id="write-it">
					<h2>Create our bundle</h2>

					cut to recorded demo that looks at the bundle
					show porter.yaml using mixins
					call out that mixins pass data

					<aside class="notes">
						open porter.yaml
						Show credentials declaration
						Parameters that can be customized
						Mixins declared
						Actions

						call out that this is how porter explain operates
					</aside>
				</section>

				<section id="explain-bundle">
					<h2>Bundles can explain themselves</h2>

					<ul>
						<li class="fragment">Credentials</li>
						<li class="fragment">Parameters</li>
						<li class="fragment">Components Used</li>
					</ul>

					<aside class="notes">
						* what secrets it will use, it can only access what you give it
						* how you can customize the installation
						* does it use arbitrary bash scripts? just helm and kubectl?
						* doesn't run on the host, brings its own tooling
					</aside>
				</section>

				<section id="bundle-security">
					<h2>Bundles borrow security features from existing tooling</h2>

					<ul>
						<li class="fragment">Runs in a container</li>
						<li class="fragment">Distributed via OCI Registry</li>
						<li class="fragment">Porter compares digests for you</li>
						<li class="fragment">We are working on signing support</li>
					</ul>

					<aside class="notes">
						
					</aside>
				</section>
				
				<section id="takeout">
					<h2>Thank you!</h2>

					<figure style="margin-top: 2em">
						<img src="../../../images/mlp-salute.png" width=""/>
						<figcaption>My Little Pony‚Ñ¢Ô∏è belongs to Hasbro.</figcaption>
					</figure>
			
				</section>

			</div>
			<slide-footer>
				<div id="slides"><a href="http://carolynvs.com/curl-pipe-bash">carolynvs.com/curl-pipe-bash</a></div>
				<div id="twitter"><a href="http://twitter.com/carolynvs">@carolynvs</a></div>
			</slide-footer>
		</div>

		<script src="../../revealjs/lib/js/head.min.js"></script>
		<script src="../../revealjs/js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
				center: true,

				// use 16:9 aspect ratio
				width: 1600,
				height: 900,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				keyboard: {
					190: null // Disable blank screen hell
				},

				// Optional reveal.js plugins
				dependencies: [
					{ src: '../../revealjs/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../../revealjs/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../../revealjs/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../../revealjs/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../../revealjs/plugin/zoom-js/zoom.js', async: true },
					{ src: '../../revealjs/plugin/notes/notes.js', async: true },
					{ src: '../../revealjs/plugin/external/external.js', condition: function() { return !!document.querySelector( '[data-external]' ); } },
				]
			});

		</script>

	</body>
</html>
