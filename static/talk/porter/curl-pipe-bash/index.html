<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>A safer curl | bash for the cloud</title>

		<meta name="description" content="A replacement one-liner for your cloud native deployments with Porter">
		<meta name="author" content="Carolyn Van Slyck">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="icon" type="image/png" href="/favicon.ico"/>
		<link rel="stylesheet" href="../../revealjs/css/reveal.css">
		<link rel="stylesheet" href="../../revealjs/css/theme/black.css" id="theme">

		<!-- Twitter Card -->
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:site" content="@carolynvs">
		<meta name="twitter:title" content="A safer curl | bash for the cloud">
		<meta name="twitter:description" content="A replacement one-liner for your cloud native deployments with Porter">
		<meta name="twitter:image" content="TODO">
		<meta name="twitter:image:alt" content="TODO">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="../../revealjs/lib/css/zenburn.css">

		<link rel="stylesheet" href="../../revealjs/css/custom.css">
		<link rel="stylesheet" href="custom.css">

		<!-- Open links outside of presentation -->
		<base target="_blank">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../../revealjs/css/print/pdf.css' : '../../revealjs/css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h2 class="blue" style="margin-bottom: 0;">
						A safer curl | bash for the cloud
					</h2>

					<img src="tabbycats2.png" width="400px" alt="Cartoon cat, gray wearing a blue beanie, hipster glasses and has a white coffee mug. Their name is Snuggly Squirrel."/>

					<p>
						Carolyn Van Slyck<br/>
						<hr style="width: 20em"/>
						Principal Software Engineer at Microsoft<br/>
						Porter Maintainer<br/>
					</p>

					<aside class="notes">
					</aside>
				</section>

				<section id="problem-statement">
					<h2>curl https://example.com/install-it-quick.sh | bash</h2>

					<aside class="notes">
						First let's talk about what "curl pipe bash" is. That's when you copy/paste 
						a command that looks like the one here. We all use scripts like this because
						they quickly install software that you aren't familiar with.
						curl downloads the script, and then the script contents are "piped" to bash
						where they are immediately executed.
					</aside>
				</section>

				<section id="yolo">
					<h2>Why we secretly like curl | bash</h2>

					<ul>
						<li class="fragment">Instant gratification</li>
						<li class="fragment">No experience required</li>
						<li class="fragment">High likelihood of success</li>
					</ul>
					<aside class="notes">
						Honestly I really like installation scripts because:
						* It is a one-liner to install.
						* Requires little to no knowledge of the installation logic or tooling.
						* We believe that the project maintainers can automate the installation better than us on the first try.

						Let's review though why using curl pipe bash is a security risk.
					</aside>
				</section>

				<section id="oops">
					<h2>Would you give an internet rando root on your machine?</h2>

					<aside class="notes">
						Let's say someone on the internet offered to help install something for you real quick.
						All you need to do is hand over your laptop for 5 seconds. I don't know about you, 
						but I don't hand over my laptop to my husband and I _trust him_. Mostly. ÔøΩÔøΩ

						When we think about handing over your laptop to a stranger, its easy to see why its risky.
						They would have access to everything on there: your documents, pictures, environment variables
						containing security tokens and passwords, you're logged into a bunch of sites, maybe even your
						work VPN. It's clear that stranger could do anything with your laptop that you yourself could do.

						That doesn't change when you switch from a physical laptop to a quick copy/paste of an installation 
						script. Oops.
					</aside>
				</section>

				<section id="pipe-detection">
					<h2>The code you read may not be the code you get</h2>

					<a href="https://www.idontplaydarts.com/2016/04/detecting-curl-pipe-bash-server-side/">idontplaydarts.com/2016/04/detecting-curl-pipe-bash-server-side</a>
					<aside class="notes">
						Okay, so what if you read the script first and then run it? Just open the
						script in your browser, look it over and go "yeah this looks like how I expected"
						and then copy/paste that one liner.

						Here's a fun fact: a web server can detect that you are piping that web request
						to bash. I'll provide a link later with the details but a malicious server could
						detect that you are piping to bash and then decide to give you a different file.
						Not that file that you just read in your browser, but whatever it wants. And
						then you are right back to where you started. Letting randos run amok on your computer.
					</aside>
				</section>

				<section id="checksums">
					<h2>In checksums we trust, right?</h2>

					<ol>
						<li class="fragment">Download the script</li>
						<li class="fragment">Compare the checksum</li>
						<li class="fragment">Read the script</li>
						<li class="fragment">Run the script</li>
					</ol>
					<aside class="notes">
						Instead of using that handy one liner, here's a safer way to run an installation script:
						1. First, download the script.
						2. Then if they provided a checksum of the script, compare the checksum of the file you
						just downloaded against it and ensure that they match.
						3. Ok, _now_ you can read the downloaded script. Scan that lovely bash and nod your head 
						like you totes get what it's doing.
						4. Finally, you can run the script.

						Like... that works but eh, I personally find it annoying.
						1. The copy/paste -> success experience from the one liner is lost.
						2. No one really wants to read bash, and depending on the complexity of the script
						even after reading it you may not be completely sure what it's going to do.
						3. Most importantly, when you do finally run the script, it's executing as your user.
						So if you did miss something when slogging through that bash? oops.
					</aside>
				</section>

				<section id="cloud-native-deployments">
					<h2>But what if I really want to?</h2>

					<ul>
						<li>Reading is hard ü§¶‚Äç‚ôÄÔ∏è</li>
						<li>Cloud Native deployments can be pretty complex</li>
						<li>I want it to be easier for people to try out my project</li>
					</ul>
					<aside class="notes">
						Alright so we aren't supposed to curl pipe bash but... What if I really want to anyway?
						Have you ever wanted to try out some software, and the installation instructions are like
						15 steps where you have to install 3 CLIs, copy your credentials yet again into more environment variables
						that you will forget about and leave around forever, and it requires a database that you
						don't feel like figuring out how to setup, and really now that you think about it, maybe 
						you'll just try this out some other time because this is just one more yak to shave and you
						have work to do.

						You know who could really benefit from a one-liner? Cloud Native Deployments 
						Often they are complex, with dependencies, dedicated CLIs,
						magic configuration, credentials... Most of us don't want to read a series of docs, 
						and install extra tools to try something out. We _really_ don't want to figure out how to 
						script coordinating these tools. For example, creating a database, and then passing the 
						connection string as a helm chart value. 
						
						Lots of potential users stop there and decide it is more work than they are willing to invest. 
						Especially when they are figuring out which software they want to use, and they are installing a
						couple and trying them out to see how they work.

						So I know that I just said that we shouldn't curl pipe bash, but if we could
						just provide our users a great experience to quickly setup and try out our software, that
						would be great, right?
					</aside>
				</section>

				<section id="safety-first">
					<h2>Let's make those one-liners safe!</h2>

					<ul>
						<li class="fragment">Isolate the installer</li>
						<li class="fragment">Automatic digest/signature checking</li>
						<li class="fragment">Insight into what the installer will do</li>
					</ul>

					<aside class="notes">
						So let's flip the reflexive "You can't do that, it's not safe" to "How can we make it safe?"
						What would we need to do that?
						* We need to isolate the installer, only giving access to what it needs, instead
						of being able to read god knows what that is hiding on my laptop.
						* Ideally we also want something that does the boring stuff like checking signatures or digests
						for us.
						* The icing would be if it could provide reliable insight into what is actually in 
						the installer so that they don't have to read the source.

						There are a couple tools out there that can meet most of our requirements above here.
						Since I'm a maintainer for Porter, a CNCF sandbox project, that's what I know best. 
						Lets see how close we can get to that curl pipe bash experience.
					</aside>
				</section>

				<section id="porter">
					<h2 style="margin-bottom: 0;">Porter</h2>
					<img src="/images/porter.png" style="width: 150px;"/>

					<p>Package your application artifact, client tools, configuration and deployment logic 
						together as a versioned bundle that you can distribute, and then install 
						with a single command</p>

					<aside class="notes">
						Porter is a command line tool that makes cloud installers.
						It packages your application, which could be a website, microservice, an IOT app, whatever
						along with any necessary client tools, configuration and all the deployment logic necessary to 
						properly install your app into a bundle. The bundle is versioned, distributed by OCI (docker) registries,
						and can be installed with 3 commands for a first time user, and just one command after that.

						It doesn't replace any of your existing tools. Porter works with any tooling or stack. 
						You can use with VMs, containers, clusters, bare metal, IOT, serverless, whatever you can script,
						it all goes in the bundle. What Porter does is provide packaging, distribution
						and a layer of security around what you use today.
					</aside>
				</section>

				<section id="tabbycats">
					<h2>Let's install TabbyCats Tracker!</h2>

					<p>
					<img src="tabbycats2.png" width="400px" alt="Cartoon cat, gray wearing a blue beanie, hipster glasses and has a white coffee mug. Their name is Snuggly Squirrel."/>
					</p>

					<a href="https://tabbycats.club">tabbycats.club</a>

					<aside class="notes">
						Open a new tab and show tabbycats

						Demo the final app we want to install
					</aside>
				</section>

				<section id="the-app">

					<ul>
						<li>Runs on Kubernetes</li>
						<li>Installed with Helm</li>
						<li>Connected to a cloud database</li>
						<li>Fronted by CloudFlare</li>
					</ul>

					<aside class="notes">
						convert to logos

    * Explain that a bundle can work with any tool. 
	* It could have just as easily been serverless functions, virtual machines, etc.
					</aside>
				</section>

				<section id="install-it">
					<h2></h2>

					show porter explain output for our bundle

					call out the credentials it needs
					run credentials generate and point to a keyvault instance
					run install
					
					<aside class="notes">
						explain that now we are a user and we want to install it
					</aside>
				</section>

				<section id="use-cases">
					<h2>Who would use this?</h2>

					<ul>
						<li class="fragment">Quickstarts - Do I want to use this?</li>
						<li class="fragment">Customer Installations - Do they want to manage this?</li>
						<li class="fragment">Your Own Deployments - Hey I didn't write this!</li>
						<li class="fragment">Side Projects - I forgot how to deploy this...</li>
					</ul>
					<aside class="notes">
						make 4 boxes with each item


* Winning over potential adopters
* Customers have to install and manage your software, what can you provide beyond docs to make them more successful?
* At your own company, the people who know how to install and manage the software aren't the ones tasked with doing so.
					</aside>
				</section>
				
				<section id="write-it">
					<h2>Create our bundle</h2>

					cut to recorded demo that looks at the bundle
					show porter.yaml using mixins
					call out that mixins pass data

					<aside class="notes">
						open porter.yaml
						Show credentials declaration
						Parameters that can be customized
						Mixins declared
						Actions

						call out that this is how porter explain operates
					</aside>
				</section>

				<section id="explain-bundle">
					<h2>Bundles can explain themselves</h2>

					<ul>
						<li class="fragment">Credentials</li>
						<li class="fragment">Parameters</li>
						<li class="fragment">Components Used</li>
					</ul>

					<aside class="notes">
						* what secrets it will use, it can only access what you give it
						* how you can customize the installation
						* does it use arbitrary bash scripts? just helm and kubectl?
						* doesn't run on the host, brings its own tooling
					</aside>
				</section>

				<section id="bundle-security">
					<h2>Bundles borrow security features from existing tooling</h2>

					<ul>
						<li class="fragment">Runs in a container</li>
						<li class="fragment">Distributed via OCI Registry</li>
						<li class="fragment">Porter compares digests for you</li>
						<li class="fragment">We are working on signing support</li>
					</ul>

					<aside class="notes">
						
					</aside>
				</section>
				
				<section id="takeout">
					<h2>Thank you!</h2>

					<figure style="margin-top: 2em">
						<img src="../../../images/mlp-salute.png" width=""/>
						<figcaption>My Little Pony‚Ñ¢Ô∏è belongs to Hasbro.</figcaption>
					</figure>
			
				</section>

			</div>
			<slide-footer>
				<div id="slides"><a href="http://carolynvs.com/curl-pipe-bash">carolynvs.com/curl-pipe-bash</a></div>
				<div id="twitter"><a href="http://twitter.com/carolynvs">@carolynvs</a></div>
			</slide-footer>
		</div>

		<script src="../../revealjs/lib/js/head.min.js"></script>
		<script src="../../revealjs/js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
				center: true,

				// use 16:9 aspect ratio
				width: 1600,
				height: 900,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				keyboard: {
					190: null // Disable blank screen hell
				},

				// Optional reveal.js plugins
				dependencies: [
					{ src: '../../revealjs/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../../revealjs/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../../revealjs/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../../revealjs/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../../revealjs/plugin/zoom-js/zoom.js', async: true },
					{ src: '../../revealjs/plugin/notes/notes.js', async: true },
					{ src: '../../revealjs/plugin/external/external.js', condition: function() { return !!document.querySelector( '[data-external]' ); } },
				]
			});

		</script>

	</body>
</html>
